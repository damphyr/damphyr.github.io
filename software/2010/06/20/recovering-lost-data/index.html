<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="google-site-verification" content="WJoG1y4O1QfZDWU4OFY1tGfE75UXU6WmQc91gCSLY5g" />
        <title>Recovering lost data</title>
        <meta name="viewport" content="width=device-width">
        <link rel="alternate" type="application/rss+xml" title="Ampelofilosofies" href="http://www.ampelofilosofies.gr/feed.xml">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20077869-1']);
  _gaq.push(['_setDomainName', 'ampelofilosofies.gr']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Ampelofilosofies</a></h1>
              <a class="extra" href="/">home</a><a class="extra" href="/about.html">about</a><a class="extra" href="/feed.xml">rss</a>
              <br/>
              <span class="extra">The mind is like a parachute. If it doesn't open, you're meat.</span>
            </div>

                <h1>Recovering lost data</h1>
<p class="meta">20 Jun 2010</p>

<div class="post">
<p>A friend called me about 10 days ago. &quot;V, I can&#39;t access my external disk, Windows won&#39;t see it. It lights up and all but I can&#39;t find my data&quot;. Now, there&#39;s a couple of reasons something like this might happen and none of them is good. The standard answer is &quot;format the disk&quot; followed closely by &quot;you should have had backups&quot; with the occasional &quot;you got backups? Good&quot;. I&#39;ve gotten pretty unemotional about delivering such news...</p>

<p>But in this case I just couldn&#39;t dismiss it without trying. It was a quarter of a terabyte of photos and movies of <em>our</em> kids, family and friends, with no other copy available. The sentimental value alone...</p>

<p>Now, the disk was spinning up and registering as unformated with the proper capacity so the worst case scenario of stuck heads and scratched plates was fortunately not in play. It being a new disk it was also well inside it&#39;s MTBF which left us with software error. A quick check revealed that the NTFS partition table decided to take a vacation to places unknown. Verdict: The data is there, but no-one knows exactly where.</p>

<p>There&#39;s a whole bunch of recover-your-deleted-files apps for windows out there, some of which I have used from time to time to salvage my own disks. None has proven satisfactory (one reason I have triple backups of my data). It didn&#39;t look like they would work this time, the geometry numbers for the disk where all wrong (I&#39;m not sure but that suggests malaware rather than windows idiocy - somebody correct me).</p>

<p>Then Google turned up <a href="http://www.cgsecurity.org/wiki/TestDisk">TestDisk</a>. Quoting from the site:</p>

<p>&quot;TestDisk is a <em>powerful</em> free data recovery software! It was primarily designed to help <em>recover lost partitions</em> and/or <em>make non-booting disks bootable again</em> <em>when</em> these symptoms are caused by <em>faulty software</em>, certain types of <em>viruses</em> or human <em>error</em> (such as accidentally deleting a Partition Table). Partition table recovery using TestDisk is really easy.&quot;</p>

<p>Now, TestDisk is cool,super hero open source software. It does what it says on the tin with all the caveats that dealing with the myriad file systems out there entails and it runs on every platform you would need it on. But it didn&#39;t work.</p>

<p>Like I said, the geometry data reported by the disk were all skewed and I couldn&#39;t find the data-sheet to type in the proper ones. I didn&#39;t really take the time to be honest &#39;cause TestDisk has a sibling, named PhotoRec.</p>

<p>&quot;PhotoRec is file data recovery software designed to recover lost files including video, documents and archives from hard disks, CD-ROMs, and lost pictures (thus the Photo Recovery name) from digital camera memory. PhotoRec ignores the file system and goes after the underlying data, so it will still work even if your media&#39;s file system has been severely damaged or reformatted.&quot; </p>

<p>Now, PhotoRec is name<em>your</em>children<em>after</em>the_developer, freaking awesome open source software. Plug the disk in, plug a second one to copy whatever PhotoRec finds, start PhotoRec and go away for a weekend (it <em>is</em> a 1TB disk we&#39;re talking about). When you come back it will have scraped every last byte off the bad disk.</p>

<p>Both tools are the work of Christophe Grenier, and I unequivocally, enthusiastically urge you to <a href="http://www.cgsecurity.org/wiki/Donation">donate</a> so that he can keep up the amazing work.</p>

<p>As for my mate? He breathed a deep, deep sigh of relief and went out and bought another disk for backups. I guess he will be more conscientious from now on...</p>

  <p>
    <span class='st_twitter_large' displayText='Tweet'></span>
    <span class='st_googleplus_large' displayText='Google +'></span>
    <span class='st_facebook_large' displayText='Facebook'></span>
    <span class='st_pinterest_large' displayText='Pinterest'></span>
  </p>
</div>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "8c4832fc-e519-49a6-a3af-b1a7f333e6da", doNotHash: false, doNotCopy: false, hashAddressBar: true});</script>
<div id="disqus_thread"></div>
<script type="text/javascript" src="http://disqus.com/forums/ampelofilosofies/embed.js"></script>
<noscript><a href="http://ampelofilosofies.disqus.com/?url=ref">View the discussion thread.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


            <div class="footer">
              <div class="contact">
                <p>
                  Vassilis Rizopoulos<br />
                  Itinerant software engineer<br />

                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/damphyr">github.com/damphyr</a><br />
                  <a href="http://twitter.com/arcandros">twitter.com/arcandros</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
