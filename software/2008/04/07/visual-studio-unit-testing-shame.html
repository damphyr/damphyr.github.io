<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="google-site-verification" content="WJoG1y4O1QfZDWU4OFY1tGfE75UXU6WmQc91gCSLY5g" />
        <title>Visual Studio Unit Testing Shame</title>
        <meta name="viewport" content="width=device-width">
        <link rel="alternate" type="application/rss+xml" title="Ampelofilosofies" href="http://www.ampelofilosofies.gr/feed.xml">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">
        <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20077869-1']);
  _gaq.push(['_setDomainName', 'ampelofilosofies.gr']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Ampelofilosofies</a></h1>
              <a class="extra" href="/">home</a><a class="extra" href="/about.html">about</a><a class="extra" href="/feed.xml">rss</a>
              <br/>
              <span class="extra">The mind is like a parachute. If it doesn't open, you're meat.</span>
            </div>

                <h1>Visual Studio Unit Testing Shame</h1>
<p class="meta">07 Apr 2008</p>

<div class="post">
<p>I&#39;m a big fan of unit testing as a bootstrap for running code in complicated systems.</p>

<p>Having a unit test framework allows you to run code that would otherwise require complicated deployment.</p>

<p>It&#39;s also a good exercise in finding out just how much of the system you&#39;re pulling along - how much configuration you have to do, how many dependencies you need to satisfy.</p>

<p>I usually end up using the framework for tests that would not qualify as unit tests: Tests start at the bottom and build up incrementally.</p>

<p>Ideally from unit to system tests you get a pyramid: Lots of very fast unit tests at the base covering a lot of ground. Composite tests higher up test your integration. The higher you go, the more complicated your infrastructure gets, but the number of tests should decrease based on the confidence that the simple <em>fast</em> tests give you.</p>

<p>And speed is where Visual Studio falls down, breaks it&#39;s neck and asks you to pay the bill.</p>

<p>I have a 1 GB RAM VM running Windows XP with Visual Studio 2008. A single unit test, for a single method takes between 11 and 18 seconds to complete.</p>

<p>The actual tests require miliseconds to complete. The rest of the time is - I guess - spent in hooking up the whole VS apparatus.</p>

<p>Using mstest on the commandline cuts the execution time in half but triples the hassle.</p>

<p>(only to be pedantic: the complete rutema test suite - unit tests and system tests - on the same VM runs in a fraction of that time  - about 7 seconds - including any interpreter startup times)</p>

<p>This kind of performance completely defeats the purpose of unit testing: people will just not build any tests if it takes so long to get them running, your technical debt increases and you find yourself with software that will not run.</p>

<p>Microsoft really needs to address this point.</p>

  <p>
    <span class='st_twitter_large' displayText='Tweet'></span>
    <span class='st_googleplus_large' displayText='Google +'></span>
    <span class='st_facebook_large' displayText='Facebook'></span>
    <span class='st_pinterest_large' displayText='Pinterest'></span>
  </p>
</div>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "8c4832fc-e519-49a6-a3af-b1a7f333e6da", doNotHash: false, doNotCopy: false, hashAddressBar: true});</script>
<div id="disqus_thread"></div>
<script type="text/javascript" src="http://disqus.com/forums/ampelofilosofies/embed.js"></script>
<noscript><a href="http://ampelofilosofies.disqus.com/?url=ref">View the discussion thread.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


            <div class="footer">
              <div class="contact">
                <p>
                  Vassilis Rizopoulos<br />
                  Itinerant software engineer<br />

                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/damphyr">github.com/damphyr</a><br />
                  <a href="http://twitter.com/arcandros">twitter.com/arcandros</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
